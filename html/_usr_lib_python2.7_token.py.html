source file: <b>/usr/lib/python2.7/token.py</b><br>


file stats: <b>120 lines, 66 executed: 55.0% covered</b>
<pre>
<font color="green">   1. &quot;&quot;&quot;Token constants (from &quot;token.h&quot;).&quot;&quot;&quot;</font>
<font color="black">   2. </font>
<font color="black">   3. #  This file is automatically generated; please don't muck it up!</font>
<font color="black">   4. #</font>
<font color="black">   5. #  To update the symbols in this file, 'cd' to the top directory of</font>
<font color="black">   6. #  the python source tree after building the interpreter and run:</font>
<font color="black">   7. #</font>
<font color="black">   8. #    ./python Lib/token.py</font>
<font color="black">   9. </font>
<font color="black">  10. #--start constants--</font>
<font color="green">  11. ENDMARKER = 0</font>
<font color="green">  12. NAME = 1</font>
<font color="green">  13. NUMBER = 2</font>
<font color="green">  14. STRING = 3</font>
<font color="green">  15. NEWLINE = 4</font>
<font color="green">  16. INDENT = 5</font>
<font color="green">  17. DEDENT = 6</font>
<font color="green">  18. LPAR = 7</font>
<font color="green">  19. RPAR = 8</font>
<font color="green">  20. LSQB = 9</font>
<font color="green">  21. RSQB = 10</font>
<font color="green">  22. COLON = 11</font>
<font color="green">  23. COMMA = 12</font>
<font color="green">  24. SEMI = 13</font>
<font color="green">  25. PLUS = 14</font>
<font color="green">  26. MINUS = 15</font>
<font color="green">  27. STAR = 16</font>
<font color="green">  28. SLASH = 17</font>
<font color="green">  29. VBAR = 18</font>
<font color="green">  30. AMPER = 19</font>
<font color="green">  31. LESS = 20</font>
<font color="green">  32. GREATER = 21</font>
<font color="green">  33. EQUAL = 22</font>
<font color="green">  34. DOT = 23</font>
<font color="green">  35. PERCENT = 24</font>
<font color="green">  36. BACKQUOTE = 25</font>
<font color="green">  37. LBRACE = 26</font>
<font color="green">  38. RBRACE = 27</font>
<font color="green">  39. EQEQUAL = 28</font>
<font color="green">  40. NOTEQUAL = 29</font>
<font color="green">  41. LESSEQUAL = 30</font>
<font color="green">  42. GREATEREQUAL = 31</font>
<font color="green">  43. TILDE = 32</font>
<font color="green">  44. CIRCUMFLEX = 33</font>
<font color="green">  45. LEFTSHIFT = 34</font>
<font color="green">  46. RIGHTSHIFT = 35</font>
<font color="green">  47. DOUBLESTAR = 36</font>
<font color="green">  48. PLUSEQUAL = 37</font>
<font color="green">  49. MINEQUAL = 38</font>
<font color="green">  50. STAREQUAL = 39</font>
<font color="green">  51. SLASHEQUAL = 40</font>
<font color="green">  52. PERCENTEQUAL = 41</font>
<font color="green">  53. AMPEREQUAL = 42</font>
<font color="green">  54. VBAREQUAL = 43</font>
<font color="green">  55. CIRCUMFLEXEQUAL = 44</font>
<font color="green">  56. LEFTSHIFTEQUAL = 45</font>
<font color="green">  57. RIGHTSHIFTEQUAL = 46</font>
<font color="green">  58. DOUBLESTAREQUAL = 47</font>
<font color="green">  59. DOUBLESLASH = 48</font>
<font color="green">  60. DOUBLESLASHEQUAL = 49</font>
<font color="green">  61. AT = 50</font>
<font color="green">  62. OP = 51</font>
<font color="green">  63. ERRORTOKEN = 52</font>
<font color="green">  64. N_TOKENS = 53</font>
<font color="green">  65. NT_OFFSET = 256</font>
<font color="black">  66. #--end constants--</font>
<font color="black">  67. </font>
<font color="green">  68. tok_name = {}</font>
<font color="green">  69. for _name, _value in globals().items():</font>
<font color="green">  70.     if type(_value) is type(0):</font>
<font color="green">  71.         tok_name[_value] = _name</font>
<font color="green">  72. del _name, _value</font>
<font color="black">  73. </font>
<font color="black">  74. </font>
<font color="green">  75. def ISTERMINAL(x):</font>
<font color="red">  76.     return x &lt; NT_OFFSET</font>
<font color="black">  77. </font>
<font color="green">  78. def ISNONTERMINAL(x):</font>
<font color="red">  79.     return x &gt;= NT_OFFSET</font>
<font color="black">  80. </font>
<font color="green">  81. def ISEOF(x):</font>
<font color="red">  82.     return x == ENDMARKER</font>
<font color="black">  83. </font>
<font color="black">  84. </font>
<font color="green">  85. def main():</font>
<font color="red">  86.     import re</font>
<font color="red">  87.     import sys</font>
<font color="red">  88.     args = sys.argv[1:]</font>
<font color="red">  89.     inFileName = args and args[0] or &quot;Include/token.h&quot;</font>
<font color="red">  90.     outFileName = &quot;Lib/token.py&quot;</font>
<font color="red">  91.     if len(args) &gt; 1:</font>
<font color="red">  92.         outFileName = args[1]</font>
<font color="red">  93.     try:</font>
<font color="red">  94.         fp = open(inFileName)</font>
<font color="red">  95.     except IOError, err:</font>
<font color="red">  96.         sys.stdout.write(&quot;I/O error: %s\n&quot; % str(err))</font>
<font color="red">  97.         sys.exit(1)</font>
<font color="red">  98.     lines = fp.read().split(&quot;\n&quot;)</font>
<font color="red">  99.     fp.close()</font>
<font color="red"> 100.     prog = re.compile(</font>
<font color="red"> 101.         &quot;#define[ \t][ \t]*([A-Z0-9][A-Z0-9_]*)[ \t][ \t]*([0-9][0-9]*)&quot;,</font>
<font color="red"> 102.         re.IGNORECASE)</font>
<font color="red"> 103.     tokens = {}</font>
<font color="red"> 104.     for line in lines:</font>
<font color="red"> 105.         match = prog.match(line)</font>
<font color="red"> 106.         if match:</font>
<font color="red"> 107.             name, val = match.group(1, 2)</font>
<font color="red"> 108.             val = int(val)</font>
<font color="red"> 109.             tokens[val] = name          # reverse so we can sort them...</font>
<font color="red"> 110.     keys = tokens.keys()</font>
<font color="red"> 111.     keys.sort()</font>
<font color="black"> 112.     # load the output skeleton from the target:</font>
<font color="red"> 113.     try:</font>
<font color="red"> 114.         fp = open(outFileName)</font>
<font color="red"> 115.     except IOError, err:</font>
<font color="red"> 116.         sys.stderr.write(&quot;I/O error: %s\n&quot; % str(err))</font>
<font color="red"> 117.         sys.exit(2)</font>
<font color="red"> 118.     format = fp.read().split(&quot;\n&quot;)</font>
<font color="red"> 119.     fp.close()</font>
<font color="red"> 120.     try:</font>
<font color="red"> 121.         start = format.index(&quot;#--start constants--&quot;) + 1</font>
<font color="red"> 122.         end = format.index(&quot;#--end constants--&quot;)</font>
<font color="red"> 123.     except ValueError:</font>
<font color="red"> 124.         sys.stderr.write(&quot;target does not contain format markers&quot;)</font>
<font color="red"> 125.         sys.exit(3)</font>
<font color="red"> 126.     lines = []</font>
<font color="red"> 127.     for val in keys:</font>
<font color="red"> 128.         lines.append(&quot;%s = %d&quot; % (tokens[val], val))</font>
<font color="red"> 129.     format[start:end] = lines</font>
<font color="red"> 130.     try:</font>
<font color="red"> 131.         fp = open(outFileName, 'w')</font>
<font color="red"> 132.     except IOError, err:</font>
<font color="red"> 133.         sys.stderr.write(&quot;I/O error: %s\n&quot; % str(err))</font>
<font color="red"> 134.         sys.exit(4)</font>
<font color="red"> 135.     fp.write(&quot;\n&quot;.join(format))</font>
<font color="red"> 136.     fp.close()</font>
<font color="black"> 137. </font>
<font color="black"> 138. </font>
<font color="green"> 139. if __name__ == &quot;__main__&quot;:</font>
<font color="red"> 140.     main()</font>
</pre>

