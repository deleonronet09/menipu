source file: <b>/root/buildbot/sandbox/lib/python2.7/site-packages/django/http/utils.py</b><br>


file stats: <b>12 lines, 2 executed: 16.7% covered</b>
<pre>
<font color="black">   1. &quot;&quot;&quot;</font>
<font color="black">   2. Functions that modify an HTTP request or response in some way.</font>
<font color="green">   3. &quot;&quot;&quot;</font>
<font color="black">   4. </font>
<font color="black">   5. # This group of functions are run as part of the response handling, after</font>
<font color="black">   6. # everything else, including all response middleware. Think of them as</font>
<font color="black">   7. # &quot;compulsory response middleware&quot;. Be careful about what goes here, because</font>
<font color="black">   8. # it's a little fiddly to override this behavior, so they should be truly</font>
<font color="black">   9. # universally applicable.</font>
<font color="black">  10. </font>
<font color="black">  11. </font>
<font color="green">  12. def conditional_content_removal(request, response):</font>
<font color="black">  13.     &quot;&quot;&quot;</font>
<font color="black">  14.     Removes the content of responses for HEAD requests, 1xx, 204 and 304</font>
<font color="black">  15.     responses. Ensures compliance with RFC 2616, section 4.3.</font>
<font color="black">  16.     &quot;&quot;&quot;</font>
<font color="red">  17.     if 100 &lt;= response.status_code &lt; 200 or response.status_code in (204, 304):</font>
<font color="red">  18.         if response.streaming:</font>
<font color="red">  19.             response.streaming_content = []</font>
<font color="black">  20.         else:</font>
<font color="red">  21.             response.content = b''</font>
<font color="red">  22.         response['Content-Length'] = '0'</font>
<font color="red">  23.     if request.method == 'HEAD':</font>
<font color="red">  24.         if response.streaming:</font>
<font color="red">  25.             response.streaming_content = []</font>
<font color="black">  26.         else:</font>
<font color="red">  27.             response.content = b''</font>
<font color="red">  28.     return response</font>
</pre>

