source file: <b>/root/buildbot/sandbox/lib/python2.7/site-packages/django/core/checks/messages.py</b><br>


file stats: <b>54 lines, 34 executed: 63.0% covered</b>
<pre>
<font color="black">   1. # -*- coding: utf-8 -*-</font>
<font color="green">   2. from __future__ import unicode_literals</font>
<font color="black">   3. </font>
<font color="green">   4. from django.utils.encoding import force_str, python_2_unicode_compatible</font>
<font color="black">   5. </font>
<font color="black">   6. # Levels</font>
<font color="green">   7. DEBUG = 10</font>
<font color="green">   8. INFO = 20</font>
<font color="green">   9. WARNING = 30</font>
<font color="green">  10. ERROR = 40</font>
<font color="green">  11. CRITICAL = 50</font>
<font color="black">  12. </font>
<font color="black">  13. </font>
<font color="green">  14. @python_2_unicode_compatible</font>
<font color="green">  15. class CheckMessage(object):</font>
<font color="black">  16. </font>
<font color="green">  17.     def __init__(self, level, msg, hint=None, obj=None, id=None):</font>
<font color="green">  18.         assert isinstance(level, int), &quot;The first argument should be level.&quot;</font>
<font color="green">  19.         self.level = level</font>
<font color="green">  20.         self.msg = msg</font>
<font color="green">  21.         self.hint = hint</font>
<font color="green">  22.         self.obj = obj</font>
<font color="green">  23.         self.id = id</font>
<font color="black">  24. </font>
<font color="green">  25.     def __eq__(self, other):</font>
<font color="red">  26.         return all(getattr(self, attr) == getattr(other, attr)</font>
<font color="red">  27.                    for attr in ['level', 'msg', 'hint', 'obj', 'id'])</font>
<font color="black">  28. </font>
<font color="green">  29.     def __ne__(self, other):</font>
<font color="red">  30.         return not (self == other)</font>
<font color="black">  31. </font>
<font color="green">  32.     def __str__(self):</font>
<font color="red">  33.         from django.db import models</font>
<font color="black">  34. </font>
<font color="red">  35.         if self.obj is None:</font>
<font color="red">  36.             obj = &quot;?&quot;</font>
<font color="red">  37.         elif isinstance(self.obj, models.base.ModelBase):</font>
<font color="black">  38.             # We need to hardcode ModelBase and Field cases because its __str__</font>
<font color="black">  39.             # method doesn't return &quot;applabel.modellabel&quot; and cannot be changed.</font>
<font color="red">  40.             obj = self.obj._meta.label</font>
<font color="black">  41.         else:</font>
<font color="red">  42.             obj = force_str(self.obj)</font>
<font color="red">  43.         id = &quot;(%s) &quot; % self.id if self.id else &quot;&quot;</font>
<font color="red">  44.         hint = &quot;\n\tHINT: %s&quot; % self.hint if self.hint else ''</font>
<font color="red">  45.         return &quot;%s: %s%s%s&quot; % (obj, id, self.msg, hint)</font>
<font color="black">  46. </font>
<font color="green">  47.     def __repr__(self):</font>
<font color="red">  48.         return &quot;&lt;%s: level=%r, msg=%r, hint=%r, obj=%r, id=%r&gt;&quot; % \</font>
<font color="red">  49.             (self.__class__.__name__, self.level, self.msg, self.hint, self.obj, self.id)</font>
<font color="black">  50. </font>
<font color="green">  51.     def is_serious(self):</font>
<font color="red">  52.         return self.level &gt;= ERROR</font>
<font color="black">  53. </font>
<font color="green">  54.     def is_silenced(self):</font>
<font color="red">  55.         from django.conf import settings</font>
<font color="red">  56.         return self.id in settings.SILENCED_SYSTEM_CHECKS</font>
<font color="black">  57. </font>
<font color="black">  58. </font>
<font color="green">  59. class Debug(CheckMessage):</font>
<font color="green">  60.     def __init__(self, *args, **kwargs):</font>
<font color="red">  61.         super(Debug, self).__init__(DEBUG, *args, **kwargs)</font>
<font color="black">  62. </font>
<font color="black">  63. </font>
<font color="green">  64. class Info(CheckMessage):</font>
<font color="green">  65.     def __init__(self, *args, **kwargs):</font>
<font color="red">  66.         super(Info, self).__init__(INFO, *args, **kwargs)</font>
<font color="black">  67. </font>
<font color="black">  68. </font>
<font color="green">  69. class Warning(CheckMessage):</font>
<font color="green">  70.     def __init__(self, *args, **kwargs):</font>
<font color="green">  71.         super(Warning, self).__init__(WARNING, *args, **kwargs)</font>
<font color="black">  72. </font>
<font color="black">  73. </font>
<font color="green">  74. class Error(CheckMessage):</font>
<font color="green">  75.     def __init__(self, *args, **kwargs):</font>
<font color="green">  76.         super(Error, self).__init__(ERROR, *args, **kwargs)</font>
<font color="black">  77. </font>
<font color="black">  78. </font>
<font color="green">  79. class Critical(CheckMessage):</font>
<font color="green">  80.     def __init__(self, *args, **kwargs):</font>
<font color="red">  81.         super(Critical, self).__init__(CRITICAL, *args, **kwargs)</font>
</pre>

