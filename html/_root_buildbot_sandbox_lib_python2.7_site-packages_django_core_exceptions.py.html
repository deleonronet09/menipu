source file: <b>/root/buildbot/sandbox/lib/python2.7/site-packages/django/core/exceptions.py</b><br>


file stats: <b>103 lines, 56 executed: 54.4% covered</b>
<pre>
<font color="black">   1. &quot;&quot;&quot;</font>
<font color="black">   2. Global Django exception and warning classes.</font>
<font color="green">   3. &quot;&quot;&quot;</font>
<font color="green">   4. from django.utils import six</font>
<font color="green">   5. from django.utils.encoding import force_text</font>
<font color="black">   6. </font>
<font color="black">   7. </font>
<font color="green">   8. class FieldDoesNotExist(Exception):</font>
<font color="green">   9.     &quot;&quot;&quot;The requested model field does not exist&quot;&quot;&quot;</font>
<font color="green">  10.     pass</font>
<font color="black">  11. </font>
<font color="black">  12. </font>
<font color="green">  13. class DjangoRuntimeWarning(RuntimeWarning):</font>
<font color="green">  14.     pass</font>
<font color="black">  15. </font>
<font color="black">  16. </font>
<font color="green">  17. class AppRegistryNotReady(Exception):</font>
<font color="green">  18.     &quot;&quot;&quot;The django.apps registry is not populated yet&quot;&quot;&quot;</font>
<font color="green">  19.     pass</font>
<font color="black">  20. </font>
<font color="black">  21. </font>
<font color="green">  22. class ObjectDoesNotExist(Exception):</font>
<font color="green">  23.     &quot;&quot;&quot;The requested object does not exist&quot;&quot;&quot;</font>
<font color="green">  24.     silent_variable_failure = True</font>
<font color="black">  25. </font>
<font color="black">  26. </font>
<font color="green">  27. class MultipleObjectsReturned(Exception):</font>
<font color="green">  28.     &quot;&quot;&quot;The query returned multiple objects when only one was expected.&quot;&quot;&quot;</font>
<font color="green">  29.     pass</font>
<font color="black">  30. </font>
<font color="black">  31. </font>
<font color="green">  32. class SuspiciousOperation(Exception):</font>
<font color="green">  33.     &quot;&quot;&quot;The user did something suspicious&quot;&quot;&quot;</font>
<font color="black">  34. </font>
<font color="black">  35. </font>
<font color="green">  36. class SuspiciousMultipartForm(SuspiciousOperation):</font>
<font color="green">  37.     &quot;&quot;&quot;Suspect MIME request in multipart form data&quot;&quot;&quot;</font>
<font color="green">  38.     pass</font>
<font color="black">  39. </font>
<font color="black">  40. </font>
<font color="green">  41. class SuspiciousFileOperation(SuspiciousOperation):</font>
<font color="green">  42.     &quot;&quot;&quot;A Suspicious filesystem operation was attempted&quot;&quot;&quot;</font>
<font color="green">  43.     pass</font>
<font color="black">  44. </font>
<font color="black">  45. </font>
<font color="green">  46. class DisallowedHost(SuspiciousOperation):</font>
<font color="green">  47.     &quot;&quot;&quot;HTTP_HOST header contains invalid value&quot;&quot;&quot;</font>
<font color="green">  48.     pass</font>
<font color="black">  49. </font>
<font color="black">  50. </font>
<font color="green">  51. class DisallowedRedirect(SuspiciousOperation):</font>
<font color="green">  52.     &quot;&quot;&quot;Redirect to scheme not in allowed list&quot;&quot;&quot;</font>
<font color="green">  53.     pass</font>
<font color="black">  54. </font>
<font color="black">  55. </font>
<font color="green">  56. class PermissionDenied(Exception):</font>
<font color="green">  57.     &quot;&quot;&quot;The user did not have permission to do that&quot;&quot;&quot;</font>
<font color="green">  58.     pass</font>
<font color="black">  59. </font>
<font color="black">  60. </font>
<font color="green">  61. class ViewDoesNotExist(Exception):</font>
<font color="green">  62.     &quot;&quot;&quot;The requested view does not exist&quot;&quot;&quot;</font>
<font color="green">  63.     pass</font>
<font color="black">  64. </font>
<font color="black">  65. </font>
<font color="green">  66. class MiddlewareNotUsed(Exception):</font>
<font color="green">  67.     &quot;&quot;&quot;This middleware is not used in this server configuration&quot;&quot;&quot;</font>
<font color="green">  68.     pass</font>
<font color="black">  69. </font>
<font color="black">  70. </font>
<font color="green">  71. class ImproperlyConfigured(Exception):</font>
<font color="green">  72.     &quot;&quot;&quot;Django is somehow improperly configured&quot;&quot;&quot;</font>
<font color="green">  73.     pass</font>
<font color="black">  74. </font>
<font color="black">  75. </font>
<font color="green">  76. class FieldError(Exception):</font>
<font color="green">  77.     &quot;&quot;&quot;Some kind of problem with a model field.&quot;&quot;&quot;</font>
<font color="green">  78.     pass</font>
<font color="black">  79. </font>
<font color="black">  80. </font>
<font color="green">  81. NON_FIELD_ERRORS = '__all__'</font>
<font color="black">  82. </font>
<font color="black">  83. </font>
<font color="green">  84. class ValidationError(Exception):</font>
<font color="green">  85.     &quot;&quot;&quot;An error while validating data.&quot;&quot;&quot;</font>
<font color="green">  86.     def __init__(self, message, code=None, params=None):</font>
<font color="black">  87.         &quot;&quot;&quot;</font>
<font color="black">  88.         The `message` argument can be a single error, a list of errors, or a</font>
<font color="black">  89.         dictionary that maps field names to lists of errors. What we define as</font>
<font color="black">  90.         an &quot;error&quot; can be either a simple string or an instance of</font>
<font color="black">  91.         ValidationError with its message attribute set, and what we define as</font>
<font color="black">  92.         list or dictionary can be an actual `list` or `dict` or an instance</font>
<font color="black">  93.         of ValidationError with its `error_list` or `error_dict` attribute set.</font>
<font color="black">  94.         &quot;&quot;&quot;</font>
<font color="black">  95. </font>
<font color="black">  96.         # PY2 can't pickle naive exception: http://bugs.python.org/issue1692335.</font>
<font color="red">  97.         super(ValidationError, self).__init__(message, code, params)</font>
<font color="black">  98. </font>
<font color="red">  99.         if isinstance(message, ValidationError):</font>
<font color="red"> 100.             if hasattr(message, 'error_dict'):</font>
<font color="red"> 101.                 message = message.error_dict</font>
<font color="black"> 102.             # PY2 has a `message` property which is always there so we can't</font>
<font color="black"> 103.             # duck-type on it. It was introduced in Python 2.5 and already</font>
<font color="black"> 104.             # deprecated in Python 2.6.</font>
<font color="red"> 105.             elif not hasattr(message, 'message' if six.PY3 else 'code'):</font>
<font color="red"> 106.                 message = message.error_list</font>
<font color="black"> 107.             else:</font>
<font color="red"> 108.                 message, code, params = message.message, message.code, message.params</font>
<font color="black"> 109. </font>
<font color="red"> 110.         if isinstance(message, dict):</font>
<font color="red"> 111.             self.error_dict = {}</font>
<font color="red"> 112.             for field, messages in message.items():</font>
<font color="red"> 113.                 if not isinstance(messages, ValidationError):</font>
<font color="red"> 114.                     messages = ValidationError(messages)</font>
<font color="red"> 115.                 self.error_dict[field] = messages.error_list</font>
<font color="black"> 116. </font>
<font color="red"> 117.         elif isinstance(message, list):</font>
<font color="red"> 118.             self.error_list = []</font>
<font color="red"> 119.             for message in message:</font>
<font color="black"> 120.                 # Normalize plain strings to instances of ValidationError.</font>
<font color="red"> 121.                 if not isinstance(message, ValidationError):</font>
<font color="red"> 122.                     message = ValidationError(message)</font>
<font color="red"> 123.                 if hasattr(message, 'error_dict'):</font>
<font color="red"> 124.                     self.error_list.extend(sum(message.error_dict.values(), []))</font>
<font color="black"> 125.                 else:</font>
<font color="red"> 126.                     self.error_list.extend(message.error_list)</font>
<font color="black"> 127. </font>
<font color="black"> 128.         else:</font>
<font color="red"> 129.             self.message = message</font>
<font color="red"> 130.             self.code = code</font>
<font color="red"> 131.             self.params = params</font>
<font color="red"> 132.             self.error_list = [self]</font>
<font color="black"> 133. </font>
<font color="green"> 134.     @property</font>
<font color="black"> 135.     def message_dict(self):</font>
<font color="black"> 136.         # Trigger an AttributeError if this ValidationError</font>
<font color="black"> 137.         # doesn't have an error_dict.</font>
<font color="red"> 138.         getattr(self, 'error_dict')</font>
<font color="black"> 139. </font>
<font color="red"> 140.         return dict(self)</font>
<font color="black"> 141. </font>
<font color="green"> 142.     @property</font>
<font color="black"> 143.     def messages(self):</font>
<font color="red"> 144.         if hasattr(self, 'error_dict'):</font>
<font color="red"> 145.             return sum(dict(self).values(), [])</font>
<font color="red"> 146.         return list(self)</font>
<font color="black"> 147. </font>
<font color="green"> 148.     def update_error_dict(self, error_dict):</font>
<font color="red"> 149.         if hasattr(self, 'error_dict'):</font>
<font color="red"> 150.             for field, error_list in self.error_dict.items():</font>
<font color="red"> 151.                 error_dict.setdefault(field, []).extend(error_list)</font>
<font color="black"> 152.         else:</font>
<font color="red"> 153.             error_dict.setdefault(NON_FIELD_ERRORS, []).extend(self.error_list)</font>
<font color="red"> 154.         return error_dict</font>
<font color="black"> 155. </font>
<font color="green"> 156.     def __iter__(self):</font>
<font color="red"> 157.         if hasattr(self, 'error_dict'):</font>
<font color="red"> 158.             for field, errors in self.error_dict.items():</font>
<font color="red"> 159.                 yield field, list(ValidationError(errors))</font>
<font color="black"> 160.         else:</font>
<font color="red"> 161.             for error in self.error_list:</font>
<font color="red"> 162.                 message = error.message</font>
<font color="red"> 163.                 if error.params:</font>
<font color="red"> 164.                     message %= error.params</font>
<font color="red"> 165.                 yield force_text(message)</font>
<font color="black"> 166. </font>
<font color="green"> 167.     def __str__(self):</font>
<font color="red"> 168.         if hasattr(self, 'error_dict'):</font>
<font color="red"> 169.             return repr(dict(self))</font>
<font color="red"> 170.         return repr(list(self))</font>
<font color="black"> 171. </font>
<font color="green"> 172.     def __repr__(self):</font>
<font color="red"> 173.         return 'ValidationError(%s)' % self</font>
</pre>

