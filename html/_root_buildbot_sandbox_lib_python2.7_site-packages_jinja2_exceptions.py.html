source file: <b>/root/buildbot/sandbox/lib/python2.7/site-packages/jinja2/exceptions.py</b><br>


file stats: <b>80 lines, 32 executed: 40.0% covered</b>
<pre>
<font color="black">   1. # -*- coding: utf-8 -*-</font>
<font color="black">   2. &quot;&quot;&quot;</font>
<font color="black">   3.     jinja2.exceptions</font>
<font color="black">   4.     ~~~~~~~~~~~~~~~~~</font>
<font color="black">   5. </font>
<font color="black">   6.     Jinja exceptions.</font>
<font color="black">   7. </font>
<font color="black">   8.     :copyright: (c) 2010 by the Jinja Team.</font>
<font color="black">   9.     :license: BSD, see LICENSE for more details.</font>
<font color="green">  10. &quot;&quot;&quot;</font>
<font color="green">  11. from jinja2._compat import imap, text_type, PY2, implements_to_string</font>
<font color="black">  12. </font>
<font color="black">  13. </font>
<font color="green">  14. class TemplateError(Exception):</font>
<font color="green">  15.     &quot;&quot;&quot;Baseclass for all template errors.&quot;&quot;&quot;</font>
<font color="black">  16. </font>
<font color="green">  17.     if PY2:</font>
<font color="green">  18.         def __init__(self, message=None):</font>
<font color="red">  19.             if message is not None:</font>
<font color="red">  20.                 message = text_type(message).encode('utf-8')</font>
<font color="red">  21.             Exception.__init__(self, message)</font>
<font color="black">  22. </font>
<font color="green">  23.         @property</font>
<font color="black">  24.         def message(self):</font>
<font color="red">  25.             if self.args:</font>
<font color="red">  26.                 message = self.args[0]</font>
<font color="red">  27.                 if message is not None:</font>
<font color="red">  28.                     return message.decode('utf-8', 'replace')</font>
<font color="black">  29. </font>
<font color="green">  30.         def __unicode__(self):</font>
<font color="red">  31.             return self.message or u''</font>
<font color="black">  32.     else:</font>
<font color="red">  33.         def __init__(self, message=None):</font>
<font color="red">  34.             Exception.__init__(self, message)</font>
<font color="black">  35. </font>
<font color="red">  36.         @property</font>
<font color="black">  37.         def message(self):</font>
<font color="red">  38.             if self.args:</font>
<font color="red">  39.                 message = self.args[0]</font>
<font color="red">  40.                 if message is not None:</font>
<font color="red">  41.                     return message</font>
<font color="black">  42. </font>
<font color="black">  43. </font>
<font color="green">  44. @implements_to_string</font>
<font color="green">  45. class TemplateNotFound(IOError, LookupError, TemplateError):</font>
<font color="green">  46.     &quot;&quot;&quot;Raised if a template does not exist.&quot;&quot;&quot;</font>
<font color="black">  47. </font>
<font color="black">  48.     # looks weird, but removes the warning descriptor that just</font>
<font color="black">  49.     # bogusly warns us about message being deprecated</font>
<font color="green">  50.     message = None</font>
<font color="black">  51. </font>
<font color="green">  52.     def __init__(self, name, message=None):</font>
<font color="red">  53.         IOError.__init__(self)</font>
<font color="red">  54.         if message is None:</font>
<font color="red">  55.             message = name</font>
<font color="red">  56.         self.message = message</font>
<font color="red">  57.         self.name = name</font>
<font color="red">  58.         self.templates = [name]</font>
<font color="black">  59. </font>
<font color="green">  60.     def __str__(self):</font>
<font color="red">  61.         return self.message</font>
<font color="black">  62. </font>
<font color="black">  63. </font>
<font color="green">  64. class TemplatesNotFound(TemplateNotFound):</font>
<font color="black">  65.     &quot;&quot;&quot;Like :class:`TemplateNotFound` but raised if multiple templates</font>
<font color="black">  66.     are selected.  This is a subclass of :class:`TemplateNotFound`</font>
<font color="black">  67.     exception, so just catching the base exception will catch both.</font>
<font color="black">  68. </font>
<font color="black">  69.     .. versionadded:: 2.2</font>
<font color="green">  70.     &quot;&quot;&quot;</font>
<font color="black">  71. </font>
<font color="green">  72.     def __init__(self, names=(), message=None):</font>
<font color="red">  73.         if message is None:</font>
<font color="red">  74.             message = u'none of the templates given were found: ' + \</font>
<font color="red">  75.                       u', '.join(imap(text_type, names))</font>
<font color="red">  76.         TemplateNotFound.__init__(self, names and names[-1] or None, message)</font>
<font color="red">  77.         self.templates = list(names)</font>
<font color="black">  78. </font>
<font color="black">  79. </font>
<font color="green">  80. @implements_to_string</font>
<font color="green">  81. class TemplateSyntaxError(TemplateError):</font>
<font color="green">  82.     &quot;&quot;&quot;Raised to tell the user that there is a problem with the template.&quot;&quot;&quot;</font>
<font color="black">  83. </font>
<font color="green">  84.     def __init__(self, message, lineno, name=None, filename=None):</font>
<font color="red">  85.         TemplateError.__init__(self, message)</font>
<font color="red">  86.         self.lineno = lineno</font>
<font color="red">  87.         self.name = name</font>
<font color="red">  88.         self.filename = filename</font>
<font color="red">  89.         self.source = None</font>
<font color="black">  90. </font>
<font color="black">  91.         # this is set to True if the debug.translate_syntax_error</font>
<font color="black">  92.         # function translated the syntax error into a new traceback</font>
<font color="red">  93.         self.translated = False</font>
<font color="black">  94. </font>
<font color="green">  95.     def __str__(self):</font>
<font color="black">  96.         # for translated errors we only return the message</font>
<font color="red">  97.         if self.translated:</font>
<font color="red">  98.             return self.message</font>
<font color="black">  99. </font>
<font color="black"> 100.         # otherwise attach some stuff</font>
<font color="red"> 101.         location = 'line %d' % self.lineno</font>
<font color="red"> 102.         name = self.filename or self.name</font>
<font color="red"> 103.         if name:</font>
<font color="red"> 104.             location = 'File &quot;%s&quot;, %s' % (name, location)</font>
<font color="red"> 105.         lines = [self.message, '  ' + location]</font>
<font color="black"> 106. </font>
<font color="black"> 107.         # if the source is set, add the line to the output</font>
<font color="red"> 108.         if self.source is not None:</font>
<font color="red"> 109.             try:</font>
<font color="red"> 110.                 line = self.source.splitlines()[self.lineno - 1]</font>
<font color="red"> 111.             except IndexError:</font>
<font color="red"> 112.                 line = None</font>
<font color="red"> 113.             if line:</font>
<font color="red"> 114.                 lines.append('    ' + line.strip())</font>
<font color="black"> 115. </font>
<font color="red"> 116.         return u'\n'.join(lines)</font>
<font color="black"> 117. </font>
<font color="black"> 118. </font>
<font color="green"> 119. class TemplateAssertionError(TemplateSyntaxError):</font>
<font color="black"> 120.     &quot;&quot;&quot;Like a template syntax error, but covers cases where something in the</font>
<font color="black"> 121.     template caused an error at compile time that wasn't necessarily caused</font>
<font color="black"> 122.     by a syntax error.  However it's a direct subclass of</font>
<font color="black"> 123.     :exc:`TemplateSyntaxError` and has the same attributes.</font>
<font color="green"> 124.     &quot;&quot;&quot;</font>
<font color="black"> 125. </font>
<font color="black"> 126. </font>
<font color="green"> 127. class TemplateRuntimeError(TemplateError):</font>
<font color="black"> 128.     &quot;&quot;&quot;A generic runtime error in the template engine.  Under some situations</font>
<font color="black"> 129.     Jinja may raise this exception.</font>
<font color="green"> 130.     &quot;&quot;&quot;</font>
<font color="black"> 131. </font>
<font color="black"> 132. </font>
<font color="green"> 133. class UndefinedError(TemplateRuntimeError):</font>
<font color="green"> 134.     &quot;&quot;&quot;Raised if a template tries to operate on :class:`Undefined`.&quot;&quot;&quot;</font>
<font color="black"> 135. </font>
<font color="black"> 136. </font>
<font color="green"> 137. class SecurityError(TemplateRuntimeError):</font>
<font color="black"> 138.     &quot;&quot;&quot;Raised if a template tries to do something insecure if the</font>
<font color="black"> 139.     sandbox is enabled.</font>
<font color="green"> 140.     &quot;&quot;&quot;</font>
<font color="black"> 141. </font>
<font color="black"> 142. </font>
<font color="green"> 143. class FilterArgumentError(TemplateRuntimeError):</font>
<font color="black"> 144.     &quot;&quot;&quot;This error is raised if a filter was called with inappropriate</font>
<font color="black"> 145.     arguments</font>
<font color="green"> 146.     &quot;&quot;&quot;</font>
</pre>

