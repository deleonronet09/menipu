source file: <b>/usr/lib/python2.7/opcode.py</b><br>


file stats: <b>158 lines, 158 executed: 100.0% covered</b>
<pre>
<font color="black">   1. </font>
<font color="black">   2. &quot;&quot;&quot;</font>
<font color="black">   3. opcode module - potentially shared between dis and other modules which</font>
<font color="black">   4. operate on bytecodes (e.g. peephole optimizers).</font>
<font color="green">   5. &quot;&quot;&quot;</font>
<font color="black">   6. </font>
<font color="green">   7. __all__ = [&quot;cmp_op&quot;, &quot;hasconst&quot;, &quot;hasname&quot;, &quot;hasjrel&quot;, &quot;hasjabs&quot;,</font>
<font color="green">   8.            &quot;haslocal&quot;, &quot;hascompare&quot;, &quot;hasfree&quot;, &quot;opname&quot;, &quot;opmap&quot;,</font>
<font color="green">   9.            &quot;HAVE_ARGUMENT&quot;, &quot;EXTENDED_ARG&quot;]</font>
<font color="black">  10. </font>
<font color="black">  11. cmp_op = ('&lt;', '&lt;=', '==', '!=', '&gt;', '&gt;=', 'in', 'not in', 'is',</font>
<font color="green">  12.         'is not', 'exception match', 'BAD')</font>
<font color="black">  13. </font>
<font color="green">  14. hasconst = []</font>
<font color="green">  15. hasname = []</font>
<font color="green">  16. hasjrel = []</font>
<font color="green">  17. hasjabs = []</font>
<font color="green">  18. haslocal = []</font>
<font color="green">  19. hascompare = []</font>
<font color="green">  20. hasfree = []</font>
<font color="black">  21. </font>
<font color="green">  22. opmap = {}</font>
<font color="green">  23. opname = [''] * 256</font>
<font color="green">  24. for op in range(256): opname[op] = '&lt;%r&gt;' % (op,)</font>
<font color="green">  25. del op</font>
<font color="black">  26. </font>
<font color="green">  27. def def_op(name, op):</font>
<font color="green">  28.     opname[op] = name</font>
<font color="green">  29.     opmap[name] = op</font>
<font color="black">  30. </font>
<font color="green">  31. def name_op(name, op):</font>
<font color="green">  32.     def_op(name, op)</font>
<font color="green">  33.     hasname.append(op)</font>
<font color="black">  34. </font>
<font color="green">  35. def jrel_op(name, op):</font>
<font color="green">  36.     def_op(name, op)</font>
<font color="green">  37.     hasjrel.append(op)</font>
<font color="black">  38. </font>
<font color="green">  39. def jabs_op(name, op):</font>
<font color="green">  40.     def_op(name, op)</font>
<font color="green">  41.     hasjabs.append(op)</font>
<font color="black">  42. </font>
<font color="black">  43. # Instruction opcodes for compiled code</font>
<font color="black">  44. # Blank lines correspond to available opcodes</font>
<font color="black">  45. </font>
<font color="green">  46. def_op('STOP_CODE', 0)</font>
<font color="green">  47. def_op('POP_TOP', 1)</font>
<font color="green">  48. def_op('ROT_TWO', 2)</font>
<font color="green">  49. def_op('ROT_THREE', 3)</font>
<font color="green">  50. def_op('DUP_TOP', 4)</font>
<font color="green">  51. def_op('ROT_FOUR', 5)</font>
<font color="black">  52. </font>
<font color="green">  53. def_op('NOP', 9)</font>
<font color="green">  54. def_op('UNARY_POSITIVE', 10)</font>
<font color="green">  55. def_op('UNARY_NEGATIVE', 11)</font>
<font color="green">  56. def_op('UNARY_NOT', 12)</font>
<font color="green">  57. def_op('UNARY_CONVERT', 13)</font>
<font color="black">  58. </font>
<font color="green">  59. def_op('UNARY_INVERT', 15)</font>
<font color="black">  60. </font>
<font color="green">  61. def_op('BINARY_POWER', 19)</font>
<font color="green">  62. def_op('BINARY_MULTIPLY', 20)</font>
<font color="green">  63. def_op('BINARY_DIVIDE', 21)</font>
<font color="green">  64. def_op('BINARY_MODULO', 22)</font>
<font color="green">  65. def_op('BINARY_ADD', 23)</font>
<font color="green">  66. def_op('BINARY_SUBTRACT', 24)</font>
<font color="green">  67. def_op('BINARY_SUBSCR', 25)</font>
<font color="green">  68. def_op('BINARY_FLOOR_DIVIDE', 26)</font>
<font color="green">  69. def_op('BINARY_TRUE_DIVIDE', 27)</font>
<font color="green">  70. def_op('INPLACE_FLOOR_DIVIDE', 28)</font>
<font color="green">  71. def_op('INPLACE_TRUE_DIVIDE', 29)</font>
<font color="green">  72. def_op('SLICE+0', 30)</font>
<font color="green">  73. def_op('SLICE+1', 31)</font>
<font color="green">  74. def_op('SLICE+2', 32)</font>
<font color="green">  75. def_op('SLICE+3', 33)</font>
<font color="black">  76. </font>
<font color="green">  77. def_op('STORE_SLICE+0', 40)</font>
<font color="green">  78. def_op('STORE_SLICE+1', 41)</font>
<font color="green">  79. def_op('STORE_SLICE+2', 42)</font>
<font color="green">  80. def_op('STORE_SLICE+3', 43)</font>
<font color="black">  81. </font>
<font color="green">  82. def_op('DELETE_SLICE+0', 50)</font>
<font color="green">  83. def_op('DELETE_SLICE+1', 51)</font>
<font color="green">  84. def_op('DELETE_SLICE+2', 52)</font>
<font color="green">  85. def_op('DELETE_SLICE+3', 53)</font>
<font color="black">  86. </font>
<font color="green">  87. def_op('STORE_MAP', 54)</font>
<font color="green">  88. def_op('INPLACE_ADD', 55)</font>
<font color="green">  89. def_op('INPLACE_SUBTRACT', 56)</font>
<font color="green">  90. def_op('INPLACE_MULTIPLY', 57)</font>
<font color="green">  91. def_op('INPLACE_DIVIDE', 58)</font>
<font color="green">  92. def_op('INPLACE_MODULO', 59)</font>
<font color="green">  93. def_op('STORE_SUBSCR', 60)</font>
<font color="green">  94. def_op('DELETE_SUBSCR', 61)</font>
<font color="green">  95. def_op('BINARY_LSHIFT', 62)</font>
<font color="green">  96. def_op('BINARY_RSHIFT', 63)</font>
<font color="green">  97. def_op('BINARY_AND', 64)</font>
<font color="green">  98. def_op('BINARY_XOR', 65)</font>
<font color="green">  99. def_op('BINARY_OR', 66)</font>
<font color="green"> 100. def_op('INPLACE_POWER', 67)</font>
<font color="green"> 101. def_op('GET_ITER', 68)</font>
<font color="black"> 102. </font>
<font color="green"> 103. def_op('PRINT_EXPR', 70)</font>
<font color="green"> 104. def_op('PRINT_ITEM', 71)</font>
<font color="green"> 105. def_op('PRINT_NEWLINE', 72)</font>
<font color="green"> 106. def_op('PRINT_ITEM_TO', 73)</font>
<font color="green"> 107. def_op('PRINT_NEWLINE_TO', 74)</font>
<font color="green"> 108. def_op('INPLACE_LSHIFT', 75)</font>
<font color="green"> 109. def_op('INPLACE_RSHIFT', 76)</font>
<font color="green"> 110. def_op('INPLACE_AND', 77)</font>
<font color="green"> 111. def_op('INPLACE_XOR', 78)</font>
<font color="green"> 112. def_op('INPLACE_OR', 79)</font>
<font color="green"> 113. def_op('BREAK_LOOP', 80)</font>
<font color="green"> 114. def_op('WITH_CLEANUP', 81)</font>
<font color="green"> 115. def_op('LOAD_LOCALS', 82)</font>
<font color="green"> 116. def_op('RETURN_VALUE', 83)</font>
<font color="green"> 117. def_op('IMPORT_STAR', 84)</font>
<font color="green"> 118. def_op('EXEC_STMT', 85)</font>
<font color="green"> 119. def_op('YIELD_VALUE', 86)</font>
<font color="green"> 120. def_op('POP_BLOCK', 87)</font>
<font color="green"> 121. def_op('END_FINALLY', 88)</font>
<font color="green"> 122. def_op('BUILD_CLASS', 89)</font>
<font color="black"> 123. </font>
<font color="green"> 124. HAVE_ARGUMENT = 90              # Opcodes from here have an argument:</font>
<font color="black"> 125. </font>
<font color="green"> 126. name_op('STORE_NAME', 90)       # Index in name list</font>
<font color="green"> 127. name_op('DELETE_NAME', 91)      # &quot;&quot;</font>
<font color="green"> 128. def_op('UNPACK_SEQUENCE', 92)   # Number of tuple items</font>
<font color="green"> 129. jrel_op('FOR_ITER', 93)</font>
<font color="green"> 130. def_op('LIST_APPEND', 94)</font>
<font color="green"> 131. name_op('STORE_ATTR', 95)       # Index in name list</font>
<font color="green"> 132. name_op('DELETE_ATTR', 96)      # &quot;&quot;</font>
<font color="green"> 133. name_op('STORE_GLOBAL', 97)     # &quot;&quot;</font>
<font color="green"> 134. name_op('DELETE_GLOBAL', 98)    # &quot;&quot;</font>
<font color="green"> 135. def_op('DUP_TOPX', 99)          # number of items to duplicate</font>
<font color="green"> 136. def_op('LOAD_CONST', 100)       # Index in const list</font>
<font color="green"> 137. hasconst.append(100)</font>
<font color="green"> 138. name_op('LOAD_NAME', 101)       # Index in name list</font>
<font color="green"> 139. def_op('BUILD_TUPLE', 102)      # Number of tuple items</font>
<font color="green"> 140. def_op('BUILD_LIST', 103)       # Number of list items</font>
<font color="green"> 141. def_op('BUILD_SET', 104)        # Number of set items</font>
<font color="green"> 142. def_op('BUILD_MAP', 105)        # Number of dict entries (upto 255)</font>
<font color="green"> 143. name_op('LOAD_ATTR', 106)       # Index in name list</font>
<font color="green"> 144. def_op('COMPARE_OP', 107)       # Comparison operator</font>
<font color="green"> 145. hascompare.append(107)</font>
<font color="green"> 146. name_op('IMPORT_NAME', 108)     # Index in name list</font>
<font color="green"> 147. name_op('IMPORT_FROM', 109)     # Index in name list</font>
<font color="green"> 148. jrel_op('JUMP_FORWARD', 110)    # Number of bytes to skip</font>
<font color="green"> 149. jabs_op('JUMP_IF_FALSE_OR_POP', 111) # Target byte offset from beginning of code</font>
<font color="green"> 150. jabs_op('JUMP_IF_TRUE_OR_POP', 112)  # &quot;&quot;</font>
<font color="green"> 151. jabs_op('JUMP_ABSOLUTE', 113)        # &quot;&quot;</font>
<font color="green"> 152. jabs_op('POP_JUMP_IF_FALSE', 114)    # &quot;&quot;</font>
<font color="green"> 153. jabs_op('POP_JUMP_IF_TRUE', 115)     # &quot;&quot;</font>
<font color="black"> 154. </font>
<font color="green"> 155. name_op('LOAD_GLOBAL', 116)     # Index in name list</font>
<font color="black"> 156. </font>
<font color="green"> 157. jabs_op('CONTINUE_LOOP', 119)   # Target address</font>
<font color="green"> 158. jrel_op('SETUP_LOOP', 120)      # Distance to target address</font>
<font color="green"> 159. jrel_op('SETUP_EXCEPT', 121)    # &quot;&quot;</font>
<font color="green"> 160. jrel_op('SETUP_FINALLY', 122)   # &quot;&quot;</font>
<font color="black"> 161. </font>
<font color="green"> 162. def_op('LOAD_FAST', 124)        # Local variable number</font>
<font color="green"> 163. haslocal.append(124)</font>
<font color="green"> 164. def_op('STORE_FAST', 125)       # Local variable number</font>
<font color="green"> 165. haslocal.append(125)</font>
<font color="green"> 166. def_op('DELETE_FAST', 126)      # Local variable number</font>
<font color="green"> 167. haslocal.append(126)</font>
<font color="black"> 168. </font>
<font color="green"> 169. def_op('RAISE_VARARGS', 130)    # Number of raise arguments (1, 2, or 3)</font>
<font color="green"> 170. def_op('CALL_FUNCTION', 131)    # #args + (#kwargs &lt;&lt; 8)</font>
<font color="green"> 171. def_op('MAKE_FUNCTION', 132)    # Number of args with default values</font>
<font color="green"> 172. def_op('BUILD_SLICE', 133)      # Number of items</font>
<font color="green"> 173. def_op('MAKE_CLOSURE', 134)</font>
<font color="green"> 174. def_op('LOAD_CLOSURE', 135)</font>
<font color="green"> 175. hasfree.append(135)</font>
<font color="green"> 176. def_op('LOAD_DEREF', 136)</font>
<font color="green"> 177. hasfree.append(136)</font>
<font color="green"> 178. def_op('STORE_DEREF', 137)</font>
<font color="green"> 179. hasfree.append(137)</font>
<font color="black"> 180. </font>
<font color="green"> 181. def_op('CALL_FUNCTION_VAR', 140)     # #args + (#kwargs &lt;&lt; 8)</font>
<font color="green"> 182. def_op('CALL_FUNCTION_KW', 141)      # #args + (#kwargs &lt;&lt; 8)</font>
<font color="green"> 183. def_op('CALL_FUNCTION_VAR_KW', 142)  # #args + (#kwargs &lt;&lt; 8)</font>
<font color="black"> 184. </font>
<font color="green"> 185. jrel_op('SETUP_WITH', 143)</font>
<font color="black"> 186. </font>
<font color="green"> 187. def_op('EXTENDED_ARG', 145)</font>
<font color="green"> 188. EXTENDED_ARG = 145</font>
<font color="green"> 189. def_op('SET_ADD', 146)</font>
<font color="green"> 190. def_op('MAP_ADD', 147)</font>
<font color="black"> 191. </font>
<font color="green"> 192. del def_op, name_op, jrel_op, jabs_op</font>
</pre>

